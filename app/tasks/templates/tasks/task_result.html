{% extends 'base.html' %}

{% block content %}
<h1>Task Result</h1>
<p>Task ID: {{ result.id }}</p>
<p>Ready: <span id="ready">{{ result.ready() }}</span></p>
<p>Successful: <span id="successful">{{ result.successful() }}</span></p>
<p>Value: <span id="value">{% if result.ready() %}{{ result.result }}{% else %}N/A{% endif %}</span></p>

<script>
    // Simple polling with JavaScript (replace with a better approach in production)
    setInterval(() => {
        fetch("{{ url_for('tasks.task_result', task_id=result.id) }}")
            .then(response => response.json())
            .then(data => {
                document.getElementById("ready").textContent = data.ready;
                document.getElementById("successful").textContent = data.successful;
                if (data.ready) {
                    document.getElementById("value").textContent = data.value;
                }
            });
    }, 2000); // Poll every 2 seconds
</script>
{% endblock %}